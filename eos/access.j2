{% extends "managed-full.j2" %}
{% block interfaces %}
{% for intf in interfaces %}
interface {{ intf.name }}
{% if intf.ifclass == 'ACCESS_UPLINK' %}
 description UPLINK
 switchport
 switchport mode trunk
 channel-group 1 mode active
{% elif intf.ifclass == 'ACCESS_AUTO' %}
 description DOT1X
 switchport
 switchport mode access
 switchport access vlan 99
{% elif intf.ifclass == 'ACCESS_UNTAGGED' %}
 switchport
 switchport mode access
 {% if (intf.untagged_vlan is defined) and intf.untagged_vlan %}
 switchport access vlan {{ intf.untagged_vlan }}
 {% else %}
 {# shutdown port instead of risking accidentaly allowing default vlan #}
 shutdown
 {% endif %}
{% elif intf.ifclass == 'ACCESS_TAGGED' %}
 switchport
 switchport mode trunk
 {% if (intf.tagged_vlan_list is defined) and intf.tagged_vlan_list %}
 switchport trunk allowed vlan {{ intf.tagged_vlan_list|join(',') }}
 {% else %}
 {# shutdown port instead of risking accidentaly allowing all vlans on trunk #}
 shutdown
 {% endif %}
{% endif %}
{% endfor %}
interface port-channel 1
 description UPLINK
{% endblock %}
